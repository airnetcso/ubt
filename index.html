<!DOCTYPE html>
<html lang="id">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Login CBT UBT</title>
 <style>
 *{ box-sizing:border-box; font-family:Arial, Helvetica, sans-serif }
 body{ 
  margin:0; 
  height:100vh; 
  display:flex; 
  justify-content:center; 
  align-items:center; 
  background:linear-gradient(rgba(0,0,0,.35),rgba(0,0,0,.35)), 
  url("https://raw.githubusercontent.com/airnetcso/eps/main/image/bg1.jpg") center/cover no-repeat; 
 }

 @keyframes fadeSlideUp {
  from { opacity: 0; transform: translateY(50px); }
  to { opacity: 1; transform: translateY(0); }
 }

 .login-box{ 
  width: 380px;
  max-width: 90%;
  background:rgba(255,255,255,.28); 
  padding: 35px 35px;               /* dikurangi dari 45px jadi 35px → lebih pendek */
  text-align:center; 
  backdrop-filter:blur(10px);
  border-radius:16px;
  box-shadow:0 12px 40px rgba(0,0,0,.3); 
  animation: fadeSlideUp 0.8s ease-out forwards;
 }

 .login-box h2{ 
  margin-bottom:20px;               /* dikurangi sedikit biar lebih rapat */
  color:#fff; 
  font-size:28px;
  font-weight:bold;
  text-shadow: 0 2px 6px rgba(0,0,0,0.5);
 }

 input, select, button{ 
  width:100%; 
  padding:14px;
  margin-bottom:14px;               /* jarak antar elemen sedikit dikurangi */
  font-size:15px; 
  border-radius:10px; 
  border:none; 
  outline:none; 
 }

 /* PLACEHOLDER LEBIH TRANSPARAN */
 input::placeholder, select option[disabled] {
  color: rgba(255,255,255,0.55);    /* dari 0.7 jadi 0.55 → lebih soft */
  opacity: 1;
 }

 input:focus, select:focus{ 
  box-shadow:0 0 0 3px rgba(96,165,250,0.5); 
  transform: scale(1.02);
  transition: all 0.3s;
 }

 button{ 
  background:#2563eb; 
  color:#fff; 
  cursor:pointer; 
  font-weight:bold; 
  font-size:16px;
  transition: all 0.3s;
  margin-bottom:0;
 }
 button:hover{ 
  background:#1e40af; 
  transform: translateY(-3px); 
  box-shadow: 0 8px 20px rgba(37,99,235,0.4);
 }

 #error-msg{ 
  color:#ff4444; 
  font-weight:bold; 
  margin-top:10px; 
  font-size:14px; 
  min-height:24px; 
 }

 .copyright{ 
  position:fixed; 
  bottom:18px; 
  width:100%; 
  text-align:center; 
  font-size:13px; 
  color:rgba(255,255,255,0.9); 
  letter-spacing:0.5px; 
  text-shadow: 0 1px 3px rgba(0,0,0,0.7);
 }
 </style>
</head>
<body>
 <div class="login-box">
 <h2>LOGIN UBT</h2>
 <input id="username" placeholder="Username / 이름" autofocus>
 <input id="password" type="password" placeholder="Password / 비밀번호">
 <select id="paket">
 <option value="" disabled selected>Pilih Paket Tryout</option>
 <option value="1">TRYOUT 01</option>
 <option value="2">TRYOUT 02</option>
 <option value="3">TRYOUT 03</option>
 </select>
 <button onclick="login()">LOGIN / 로그인</button>
 <div id="error-msg"></div>
 </div>
 <div class="copyright">
 © 2026 Denzuka - Kim Jongun. All Rights Reserved.
 </div>

 <script>
 const SPREADSHEET_URL = "https://script.google.com/macros/s/AKfycbzwdfNflhqIyVWo8knAyB2nWtzlkbPiRHfMCJV_O_mxkZravDprrAhMNV3Qu75WFYgk0g/exec";

 const users = [
 {username:"uus",password:"111"},
 {username:"windi",password:"Windi2000"},
 {username:"rismaya97",password:"bahasakorea"},
 {username:"sita77",password:"minyooki"},
 {username:"Aini185",password:"Doraemon"},
 {username:"Hangeulfei",password:"studykorea02"},
 {username:"Hamdan106",password:"Fukuo106"},
 {username:"Heri",password:"heri99"},
 {username:"hanarizka",password:"Nungkihana24!"},
 {username:"Fikrisurya",password:"464646"},
 {username:"Mutiara2003",password:"Mutiara14"},
 {username:"wantikas",password:"200022"},
 {username:"Dininidia",password:"dininidia11"},
 {username:"kaniarostayuni9",password:"Kania1313"},
 {username:"Dikisetiawan07",password:"Diki2709"},
 {username:"Aisyah18",password:"Aisyah18."},
 {username:"Rizka2026",password:"butterfly24"},
 {username:"Zhafif07",password:"20060722"},
 {username:"admin",password:"admin123",role:"admin"}
 ];

 function checkStorage(){
 try{ localStorage.setItem("test","ok"); localStorage.removeItem("test"); return true; }catch(e){ return false; }
 }

 function login(){
 const err = document.getElementById("error-msg");
 err.innerText = "";
 if(!checkStorage()){ err.innerText = "Browser memblokir localStorage. Gunakan mode normal."; return; }
 
 const u = document.getElementById("username").value.trim();
 const p = document.getElementById("password").value.trim();
 const paket = document.getElementById("paket").value;
 
 if (!u || !p || !paket) { err.innerText = "Semua kolom wajib diisi!"; return; }

 const user = users.find(x => x.username === u && x.password === p);
 if(!user){ err.innerText = "Username atau password salah!"; return; }
 
 if(Number(paket) > 1){
 const results = JSON.parse(localStorage.getItem("results") || "[]");
 const prev = results.find(r => r.name === u && Number(r.paket) === Number(paket) - 1);
 if(!prev || Number(prev.score) < 80){ 
  err.innerText = "Harus lulus paket sebelumnya dengan nilai minimal 80"; 
  return; 
 }
 }
 
 const dataToSend = {
  waktu: new Date().toLocaleString('id-ID', {timeZone: 'Asia/Jakarta'}),
  namaSiswa: u,
  code: "UBT-PAKET" + paket,
  kosaKata: "-",
  ubt: "Mulai Tryout Paket " + paket,
  latihanSoal: "-",
  keterangan: "Login sukses, mulai mengerjakan UBT"
 };

 fetch(SPREADSHEET_URL, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(dataToSend)
 })
 .then(() => console.log("Login UBT tercatat di sheet"))
 .catch(err => console.error("Gagal catat login UBT:", err));

 localStorage.setItem("login","true");
 localStorage.setItem("user",u);
 localStorage.setItem("paket",paket);
 
 if(user.role === "admin") {
  location.href = "https://airnetcso.github.io/admin/";
 } else {
  location.href = "dashboard.html";
 }
 }

 document.addEventListener("keypress", function(e) {
 if (e.key === "Enter") login();
 });
 </script>
</body>
</html>
