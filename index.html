<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login CBT UBT</title>

<!-- Tambahan untuk PWA + Landscape Force -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#1e3a8a">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
*{ box-sizing:border-box; font-family:Arial, Helvetica, sans-serif }
body{ 
  margin:0; 
  height:100vh; 
  display:flex; 
  justify-content:center; 
  align-items:center; 
  background:linear-gradient(rgba(0,0,0,.35),rgba(0,0,0,.35)), 
              url("https://raw.githubusercontent.com/airnetcso/eps/main/image/bg1.jpg") center/cover no-repeat; 
}
/* ANIMASI MASUK HALUS + POLISH */
@keyframes fadeSlideUp {
  from { opacity: 0; transform: translateY(50px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}
.login-box{ 
  width:340px; 
  background:rgba(255,255,255,.3); 
  padding:30px 25px; 
  text-align:center; 
  backdrop-filter:blur(6px); 
  border-radius:10px; 
  box-shadow:0 8px 32px rgba(0,0,0,.2); 
  animation: fadeSlideUp 0.8s ease-out forwards;
  position:relative;
  overflow:hidden;
  transition:transform .3s, box-shadow .3s;
  border:1px solid rgba(30,58,138,.2);
}
.login-box::before {
  content:'';
  position:absolute;
  top:-2px; left:-2px; right:-2px; bottom:-2px;
  background:linear-gradient(45deg, #1e3a8a, #60a5fa);
  z-index:-1;
  border-radius:10px;
  opacity:0;
  transition:opacity .3s;
}
.login-box:hover::before { opacity:0.6; }
.login-box:hover {
  transform:translateY(-5px);
  box-shadow:0 15px 40px rgba(0,0,0,.3);
}
.login-box h2{ 
  margin-bottom:20px; 
  color:#fff; 
  font-size:24px; 
  text-shadow:0 2px 6px rgba(0,0,0,.7);
}
input, select, button{ 
  width:100%; 
  padding:12px; 
  margin-bottom:12px; 
  font-size:14px; 
  border-radius:6px; 
  border:none; 
  outline:none; 
}
input, select {
  background:rgba(255,255,255,.18);
  color:#fff;
  backdrop-filter:blur(4px);
  transition:background .3s, box-shadow .3s;
}
input::placeholder, select::placeholder {
  color:rgba(255,255,255,.45);
  opacity:1;
  transition:color .3s;
}
input:focus::placeholder, select:focus::placeholder {
  color:rgba(255,255,255,.8);
}
input:focus, select:focus{ 
  box-shadow:0 0 0 2px #60a5fa; 
  background:rgba(255,255,255,.3);
}
button{ 
  background:#1e3a8a;
  color:#fff; 
  cursor:pointer; 
  font-weight:bold; 
  transition:background .3s, transform .2s; 
}
button:hover{ 
  background:#172554;
  transform:translateY(-2px);
  animation: pulse 1.5s infinite;
}
@keyframes pulse {
  0%{box-shadow:0 0 0 0 rgba(30,58,138,.7);}
  70%{box-shadow:0 0 0 10px rgba(30,58,138,0);}
  100%{box-shadow:0 0 0 0 rgba(30,58,138,0);}
}
#error-msg{ 
  color:#ff6b6b; 
  font-weight:bold; 
  margin-top:10px; 
  font-size:13px; 
  min-height:20px; 
}
.copyright{ 
  position:fixed; 
  bottom:12px; 
  width:100%; 
  text-align:center; 
  font-size:12px; 
  color:rgba(255,255,255,0.85); 
  letter-spacing:0.5px; 
}
.info{ 
  color:#fff; 
  font-size:12px; 
  margin-top:15px; 
}

/* Portrait Warning (baru) */
#portrait-warning {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.95);
  color: white;
  z-index: 9999;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 1.8rem;
  text-align: center;
  padding: 20px;
}
</style>
</head>
<body>

<!-- Warning Portrait (baru - hanya muncul pas portrait) -->
<div id="portrait-warning">
  <h2>Mode Landscape Diperlukan!</h2>
  <p>App ini dirancang untuk tampilan horizontal.<br>
     Putar HP kamu ke samping (landscape) untuk melanjutkan üôè<br>
     <small>(Pastikan auto-rotate HP nyala)</small></p>
</div>

 <div class="login-box">
  <h2>LOGIN UBT</h2>
  <input id="username" placeholder="Username / Ïù¥Î¶Ñ" autofocus>
  <input id="password" type="password" placeholder="Password / ÎπÑÎ∞ÄÎ≤àÌò∏">
  <select id="paket">
   <option value="1">TRYOUT 01</option>
   <option value="2">TRYOUT 02</option>
   <option value="3">TRYOUT 03</option>
  </select>
  <button onclick="login()">LOGIN / Î°úÍ∑∏Ïù∏</button>
  <div id="error-msg"></div>
 </div>
 <div class="copyright">
  ¬© 2026 Denzuka - Kim Jongun. All Rights Reserved.
 </div>

 <script>
 const SPREADSHEET_URL = "https://script.google.com/macros/s/AKfycbzxyVIlsyLswlfnQG618eeUZgN83dd2jfCjU0r7LsNHM3A6NNiibuCIb5e3CNs9J1vVhQ/exec";

 const users = [
  {username:"uus",password:"111"},
  {username:"windi",password:"Windi2000"},
  // ... semua users lu yang lain tetep sama ...
  {username:"mila",password:"lestari"}
 ];

 function checkStorage(){
  try{ localStorage.setItem("test","ok"); localStorage.removeItem("test"); return true; }catch(e){ return false; }
 }

 function login(){
  const err = document.getElementById("error-msg");
  err.innerText = "";
  if(!checkStorage()){ err.innerText = "Browser memblokir localStorage. Gunakan mode normal."; return; }
  
  const u = document.getElementById("username").value.trim();
  const p = document.getElementById("password").value.trim();
  const paket = document.getElementById("paket").value;
  
  if (!u || !p) { err.innerText = "Username & password wajib diisi!"; return; }

  const user = users.find(x => x.username === u && x.password === p);
  if(!user){ err.innerText = "Username atau password salah!"; return; }
  
  if(Number(paket) > 1){
   const results = JSON.parse(localStorage.getItem("results") || "[]");
   const prev = results.find(r => r.name === u && Number(r.paket) === Number(paket) - 1);
   if(!prev || Number(prev.score) < 80){ 
    err.innerText = "Harus lulus paket sebelumnya dengan nilai minimal 80"; 
    return; 
   }
  }
  
  localStorage.setItem("login","true");
  localStorage.setItem("user",u);
  localStorage.setItem("paket",paket);
  
  location.href = "dashboard.html";
 }

 // Enter untuk login
 document.addEventListener("keypress", function(e) {
  if (e.key === "Enter") login();
 });
 </script>

<!-- Script landscape force (baru) -->
<script>
async function forceLandscape() {
  if (screen.orientation && screen.orientation.lock) {
    try {
      await screen.orientation.lock("landscape-primary");
      console.log("Locked to landscape!");
    } catch (err) {
      console.warn("Orientation lock gagal:", err);
      showPortraitWarning();
    }
  } else {
    showPortraitWarning();
  }
}

function showPortraitWarning() {
  document.getElementById("portrait-warning").style.display = "flex";
  document.querySelector(".login-box").style.display = "none"; // optional: sembunyiin form pas warning
}

window.addEventListener('load', forceLandscape);
window.addEventListener('orientationchange', () => {
  if (screen.orientation.type.includes("portrait")) {
    showPortraitWarning();
  } else {
    document.getElementById("portrait-warning").style.display = "none";
    document.querySelector(".login-box").style.display = "block";
  }
});
</script>

</body>
</html>
