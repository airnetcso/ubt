<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Lokal - Hasil Quiz</title>
<style>
body{font-family:Arial,sans-serif;background:#f0f0f0;margin:0;padding:20px}
h1{text-align:center;color:#3f51b5}
table{width:100%;border-collapse:collapse;margin-top:20px;background:#fff;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
th,td{border:1px solid #ddd;padding:12px;text-align:center}
th{background:#3f51b5;color:white}
tr:nth-child(even){background:#f9f9f9}
#passwordPrompt{text-align:center;margin:50px auto;max-width:400px}
input{padding:12px;width:80%;max-width:300px;border-radius:8px;border:1px solid #ccc}
button{padding:12px 20px;background:#3f51b5;color:white;border:none;border-radius:8px;cursor:pointer}
</style>
</head>
<body>

<h1>ADMIN LOKAL - HASIL QUIZ</h1>

<div id="passwordPrompt">
  <p>Masukan password admin:</p>
  <input type="password" id="passwordInput">
  <button onclick="checkPassword()">MASUK</button>
</div>

<div id="main" style="display:none;">
  <table id="resultsTable">
    <thead><tr><th>No</th><th>Username</th><th>Kode Soal</th><th>Nilai</th><th>Tanggal</th></tr></thead>
    <tbody></tbody>
  </table>
  <p style="text-align:center;margin-top:30px;">
    <a href="https://airnetcso.github.io/latbakor/admin.html" target="_blank" style="color:#3f51b5;font-weight:bold;">Buka Admin Pusat (Lihat Semua App + Data Siswa)</a>
  </p>
</div>

<script>
const ADMIN_PASSWORD = "admin123"; // Sama seperti pusat
const APP_NAME = "latbakor"; // Ganti: "latbakor" / "ubt" / "koka"

function checkPassword() {
  if (document.getElementById("passwordInput").value === ADMIN_PASSWORD) {
    document.getElementById("passwordPrompt").style.display = "none";
    document.getElementById("main").style.display = "block";
    loadResults();
  } else {
    alert("Password salah!");
  }
}

function loadResults() {
  const data = JSON.parse(localStorage.getItem("quizResults") || "[]");
  const filtered = data.filter(item => item.app === APP_NAME);
  const tbody = document.querySelector("#resultsTable tbody");
  tbody.innerHTML = "";
  if (filtered.length === 0) {
    tbody.innerHTML = "<tr><td colspan='5'>Belum ada hasil quiz di app ini</td></tr>";
    return;
  }
  filtered.sort((a,b) => new Date(b.tanggal) - new Date(a.tanggal));
  filtered.forEach((item, i) => {
    const row = document.createElement("tr");
    row.innerHTML = `<td>${i+1}</td><td><b>${item.username}</b></td><td>${item.kode || "-"}</td><td><b>${item.nilai}</b></td><td>${item.tanggal}</td>`;
    tbody.appendChild(row);
  });
}
</script>
</body>
</html>
